<h1 class="page-header">Games</h1>

<mat-card class="mb-4">

    <div class="game-controls">
        <a class="mr-4" mat-raised-button color="primary" [routerLink]="['create']">Start a Game</a>
        <a mat-raised-button [routerLink]="['rules']">Rules</a>
    </div>

    <div class="mb-4" *ngIf="games?.active.length">
        <h3>Active Games</h3>
        <table mat-table [dataSource]="games?.active">

            <ng-container matColumnDef="opponent">
                <th mat-header-cell *matHeaderCellDef> Opponent </th>
                <td mat-cell *matCellDef="let game"> {{game.opponent}} </td>
            </ng-container>

            <ng-container matColumnDef="date">
                <th mat-header-cell *matHeaderCellDef> Date </th>
                <td mat-cell *matCellDef="let game"> {{game.date.date | date }} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="activeColumns"></tr>
            <tr mat-row *matRowDef="let game; columns: activeColumns;" (click)="viewGame(game)"></tr>
        </table>
    </div>

    <div class="mb-4" *ngIf="games?.finished.length">
        <h3>Finished Games</h3>
        <table mat-table [dataSource]="games?.finished">

            <ng-container matColumnDef="rank">
                <th mat-header-cell *matHeaderCellDef> Rank </th>
                <td mat-cell *matCellDef="let game; let index = index;"> {{ index + 1 }} </td>
            </ng-container>

            <ng-container matColumnDef="opponent">
                <th mat-header-cell *matHeaderCellDef> Opponent </th>
                <td mat-cell *matCellDef="let game"> {{game.opponent}} </td>
            </ng-container>

            <ng-container matColumnDef="date">
                <th mat-header-cell *matHeaderCellDef> Date </th>
                <td mat-cell *matCellDef="let game"> {{game.date.date | date }} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let game; columns: displayedColumns;" (click)="viewGame(game)"></tr>
        </table>
    </div>
</mat-card>

<a mat-fab class="add-button" [routerLink]="['create']">
    <mat-icon>add</mat-icon>
</a>